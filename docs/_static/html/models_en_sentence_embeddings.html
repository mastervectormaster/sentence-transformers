<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SBERT.net Models</title>
    <!-- Vue.js -->
   <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.12/vue.min.js" integrity="sha512-BKbSR+cfyxLdMAsE0naLReFSLg8/pjbgfxHh/k/kUC82Hy7r6HtR5hLhobaln2gcTvzkyyehrdREdjpsQwy2Jw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
          integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
            integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
            integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
            crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
            integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
            crossorigin="anonymous"></script>

    <!-- Axios -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js" integrity="sha512-bZS47S7sPOxkjU/4Bt0zrhEtWx0y0CRkhEp8IckzK+ltifIIE9EMIMTuT/mEzoIMewUINruDBIR/jJnbguonqQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script> -->

    <!-- Font-awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
          integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w=="
          crossorigin="anonymous" referrerpolicy="no-referrer"/>

    <!-- Lodash -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js"
            integrity="sha512-WFN04846sdKMIP5LKNphMaWzU7YpMyCU245etK3g/2ARYbPK9Ub18eG+ljU96qKRCWh+quCY7yefSmlkQw1ANQ=="
            crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <style>
        .fa-active {
            color: #337ab7;
        }


        .header-cell {
            cursor: pointer;
        }

        .models-table thead th {
            position: sticky;
            top: 0;
            z-index: 1;
            background-color: #ffffff;
        }


        .info-icon {
            color: #007bff;
        }

        .info-icon:hover {
            color: #0056b3;
        }

        .info-icon-model {
            padding-left: 10px;
        }

        .bs-popover-auto[x-placement^=bottom], .bs-popover-bottom {
            margin-top: .5rem;
        }

        .popover {
            max-width: 400px;
        }
    </style>
</head>
<body>

<div id="app">
    <table class="table table-bordered table-sm">
        <thead>
            <tr>
                <th class="header-cell" @click="sortAsc = (sortBy=='name') ? sortAsc = !sortAsc : false; sortBy='name'">
                    <i class="fas fa-active" v-if="sortBy == 'name'" v-bind:class="{ 'fa-sort-amount-up': !sortAsc, 'fa-sort-amount-down-alt': sortAsc }"></i>
                    Model Name
                </th>
                <th class="header-cell text-center" @click="sortAsc = (sortBy=='stsb') ? sortAsc = !sortAsc : false; sortBy='stsb'">
                    <i class="fas fa-active" v-if="sortBy == 'stsb'" v-bind:class="{ 'fa-sort-amount-up': !sortAsc, 'fa-sort-amount-down-alt': sortAsc }"></i>
                    STSb Performance
                     <span class="info-icon" data-trigger="hover" data-toggle="popover" title="STSbenchmark" data-content="Spearman-rank correlation on the STSbenchmark test set. Higher = Better" data-html="true" data-placement="bottom"><i class="fas fa-info-circle"></i></span>
                </th>
                <th class="header-cell text-center" @click="sortAsc = (sortBy=='dupq') ? sortAsc = !sortAsc : false; sortBy='dupq'">
                     <i class="fas fa-active" v-if="sortBy == 'dupq'" v-bind:class="{ 'fa-sort-amount-up': !sortAsc, 'fa-sort-amount-down-alt': sortAsc }"></i>
                    DupQ
                    <span class="info-icon" data-trigger="hover" data-toggle="popover" title="Duplicate Questions" data-content="Combination of two datasets for duplicate questions:<br>Mean-Average-Precision on the Quora Duplicate Questions Semantic Search test set.<br>Average-Precision on the Sprint duplicate questions test set.<br> Higher = Better" data-html="true" data-placement="bottom"><i class="fas fa-info-circle"></i></span>
                </th>
                <th class="header-cell text-center" @click="sortAsc = (sortBy=='final_score') ? sortAsc = !sortAsc : false; sortBy='final_score'">
                    <i class="fas fa-active" v-if="sortBy == 'final_score'" v-bind:class="{ 'fa-sort-amount-up': !sortAsc, 'fa-sort-amount-down-alt': sortAsc }"></i>
                    Avg. Performance
                     <span class="info-icon" data-trigger="hover" data-toggle="popover" title="Average Performance" data-content="Average Performance over all tasks.<br>Higher = Better" data-html="true" data-placement="bottom"><i class="fas fa-info-circle"></i></span>
                </th>
                <th class="header-cell text-center" @click="sortAsc = (sortBy=='speed') ? sortAsc = !sortAsc : false; sortBy='speed'">
                    <i class="fas fa-active" v-if="sortBy == 'speed'" v-bind:class="{ 'fa-sort-amount-up': !sortAsc, 'fa-sort-amount-down-alt': sortAsc }"></i>
                    Speed
                     <span class="info-icon" data-trigger="hover" data-toggle="popover" title="Encoding Speed" data-content="Encoding speed (sentences / sec) on a V100 GPU.<br>Higher = Better" data-html="true" data-placement="bottom"><i class="fas fa-info-circle"></i></span>

                </th>
            </tr>
        </thead>
        <tbody>
            <tr v-for="item in sortedModels">
                <td>
                    {{ item.name }}
                    <span class="info-icon info-icon-model" data-trigger="hover" data-toggle="popover" :title="item.name" :data-content="'<b>Base Model:</b> '+item.base_model+'<br><b>Pooling:</b> '+item.pooling+'<br><b>Training Data:</b> '+item.training_data" data-html="true" data-placement="bottom"><i class="fas fa-info-circle"></i></span>

                </td>
                <td class="text-center">{{ item.stsb ? item.stsb.toFixed(2) : '' }}</td>
                <td class="text-center"><span :title="'Quora: '+item.qqp.toFixed(2)+' Sprint: '+item.sprint.toFixed(2)">{{ item.dupq ? item.dupq.toFixed(2) : '' }}</span></td>
                <td class="text-center">{{ item.final_score.toFixed(2) }}</td>
                <td class="text-center">{{ item.speed }}</td>
            </tr>
        </tbody>
    </table>
</div>

<script>
    var app = new Vue({
        el: '#app',
        data: {
            models: [
                {
                    "name": "stsb-mpnet-base-v2",
                    "base_model": "mpnet-base",
                    "pooling": "Mean Pooling",
                    "training_data": "NLI+STSb",
                    "stsb": 88.57,
                    "qqp": 79.74,
                    "sprint": 90.34,
                    "speed": 2800
                },
                {
                    "name": "stsb-roberta-base-v2",
                    "base_model": "roberta-base",
                    "pooling": "Mean Pooling",
                    "training_data": "NLI+STSb",
                    "stsb": 87.21,
                    "qqp": 78.68,
                    "sprint": 86.42,
                    "speed": 2300
                },
                {
                    "name": "stsb-distilroberta-base-v2",
                    "base_model": "distilroberta-base",
                    "pooling": "Mean Pooling",
                    "training_data": "NLI+STSb",
                    "stsb": 86.41,
                    "qqp": 78.13,
                    "sprint": 87.28,
                    "speed": 4000
                },
                {
                    "name": "nli-mpnet-base-v2",
                    "base_model": "mpnet-base",
                    "pooling": "Mean Pooling",
                    "training_data": "NLI",
                    "stsb": 86.53,
                    "qqp": 80.65,
                    "sprint": 85.79,
                    "speed": 2800
                },
                {
                    "name": "nli-roberta-base-v2",
                    "base_model": "roberta-base",
                    "pooling": "Mean Pooling",
                    "training_data": "NLI",
                    "stsb": 85.54,
                    "qqp": 78.73,
                    "sprint": 81.67,
                    "speed": 2300
                },
                {
                    "name": "nli-distilroberta-base-v2",
                    "base_model": "distilroberta-base",
                    "pooling": "Mean Pooling",
                    "training_data": "NLI",
                    "stsb": 84.38,
                    "qqp": 78.47,
                    "sprint": 83.03,
                    "speed": 4000
                },
                {
                    "name": "average_word_embeddings_glove.6B.300d",
                    "base_model": "Word Embeddings: GloVe",
                    "pooling": "Mean Pooling",
                    "training_data": "-",
                    "stsb": 61.77,
                    "qqp": 69.18,
                    "sprint": 86.96,
                    "speed": 34000
                },
                {
                    "name": "average_word_embeddings_komninos",
                    "base_model": "Word Embeddings: Komninos et al.",
                    "pooling": "Mean Pooling",
                    "training_data": "-",
                    "stsb": 61.56,
                    "qqp": 69.83,
                    "sprint": 85.55,
                    "speed": 22000
                },
                {
                    "name": "average_word_embeddings_levy_dependency",
                    "base_model": "Word Embeddings: Levy et al.",
                    "pooling": "Mean Pooling",
                    "training_data": "-",
                    "stsb": 59.22,
                    "qqp": 64.62,
                    "sprint": 80.12,
                    "speed": 22000
                },
                {
                    "name": "average_word_embeddings_glove.840B.300d",
                    "base_model": "Word Embeddings: GloVe",
                    "pooling": "Mean Pooling",
                    "training_data": "",
                    "stsb": 52.54,
                    "qqp": 66.99,
                    "sprint": 68.33,
                    "speed": 34000
                },
                {
                    "name": "paraphrase-MiniLM-L12-v2",
                    "base_model": "microsoft/MiniLM-L12-H384-uncased",
                    "pooling": "Mean Pooling",
                    "training_data": "AllNLI, sentence-compression, SimpleWiki, altlex, msmarco-triplets, quora_duplicates, coco_captions,flickr30k_captions, yahoo_answers_title_question, S2ORC_citation_pairs, stackexchange_duplicate_questions, wiki-atomic-edits",
                    "stsb": 84.41,
                    "qqp":  84.64,
                    "sprint": 89.91,
                    "speed": 7500
                },
                 {
                    "name": "paraphrase-MiniLM-L6-v2",
                    "base_model": "nreimers/MiniLM-L6-H384-uncased",
                    "pooling": "Mean Pooling",
                    "training_data": "AllNLI, sentence-compression, SimpleWiki, altlex, msmarco-triplets, quora_duplicates, coco_captions,flickr30k_captions, yahoo_answers_title_question, S2ORC_citation_pairs, stackexchange_duplicate_questions, wiki-atomic-edits",
                    "stsb": 84.12,
                    "qqp":  84.25,
                    "sprint": 90.21,
                    "speed": 14200
                },
                 {
                    "name": "paraphrase-distilroberta-base-v2",
                    "base_model": "distilroberta-base",
                    "pooling": "Mean Pooling",
                    "training_data": "AllNLI, sentence-compression, SimpleWiki, altlex, msmarco-triplets, quora_duplicates, coco_captions,flickr30k_captions, yahoo_answers_title_question, S2ORC_citation_pairs, stackexchange_duplicate_questions, wiki-atomic-edits",
                    "stsb": 85.37,
                    "qqp": 84.31,
                    "sprint": 89.64,
                    "speed": 4000
                },

            ],
            sortBy: 'final_score',
            sortAsc: false
        },
        methods: {

        },
        computed: {
            sortedModels: function() {
                //Add avg. for duplicate questions
                let models_ext = this.models.map(function(elem, index)  { elem.dupq = (elem.qqp + elem.sprint)/2.0; return elem;} );

                //Final score
                models_ext = models_ext.map(function(elem, index)  { elem.final_score = (elem.stsb + elem.dupq)/2.0; return elem;} );

                return _.orderBy(models_ext, (item) => item[this.sortBy] || (this.sortAsc ? 9999 : -9999), this.sortAsc ? 'asc' : 'desc')
            }
        }
    })
</script>

<script>
    $(function () {
      $('[data-toggle="popover"]').popover()
    })
</script>


</body>
</html>
